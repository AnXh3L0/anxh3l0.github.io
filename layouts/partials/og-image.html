{{/* Dynamic OG Image Generation */}}
{{/* Uses Hugo's image processing to create social preview images */}}

{{ $ogImage := "" }}

{{/* Check for page-specific image first */}}
{{ with .Params.images }}
  {{ $ogImage = index . 0 }}
{{ end }}

{{/* If no specific image, try to generate one or use defaults */}}
{{ if not $ogImage }}
  {{/* Try to get a featured image from the page bundle */}}
  {{ $featured := .Resources.GetMatch "featured*" }}
  {{ with $featured }}
    {{ $ogImage = .RelPermalink }}
  {{ end }}
{{ end }}

{{/* Fall back to section-specific defaults */}}
{{ if not $ogImage }}
  {{ if eq .Section "posts" }}
    {{ $ogImage = "/media/images/meta/posts.png" }}
  {{ else if eq .Section "portfolio" }}
    {{ $ogImage = "/media/images/meta/portfolio.png" }}
  {{ else if eq .Section "speaking" }}
    {{ $ogImage = "/media/images/meta/speaking.png" }}
  {{ else }}
    {{ $ogImage = "/media/images/meta/default.png" }}
  {{ end }}
{{ end }}

{{/* Output the OG image meta tags */}}
<meta property="og:image" content="{{ $ogImage | absURL }}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="{{ .Title }}">
<meta name="twitter:image" content="{{ $ogImage | absURL }}">
<meta name="twitter:card" content="summary_large_image">

