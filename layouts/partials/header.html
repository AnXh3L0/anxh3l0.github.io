<header class="pointer-events-none relative z-50 flex flex-none flex-col"
        style="height:var(--header-height);margin-bottom:var(--header-mb)">

    {{ if .IsHome }}
    <div class="order-last mt-[calc(theme(spacing.16)-theme(spacing.3))]"></div>
    <div class="top-0 order-last -mb-3 pt-3 sm:px-8" style="position: var(--header-position);">
        <div class="mx-auto w-full max-w-7xl lg:px-8">
            <div class="relative px-4 sm:px-8 lg:px-12">
                <div class="mx-auto max-w-2xl lg:max-w-5xl">
                    <div class="top-[var(--avatar-top,theme(spacing.3))] w-full"
                        style="position: var(--header-inner-position);">
                        <div class="relative">
                            <div class="avatar-border absolute left-0 top-3 h-10 w-10 origin-left rounded-full bg-white/90 p-0.5 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur transition-opacity dark:bg-zinc-800/90 dark:ring-white/10"
                                style="opacity: var(--avatar-border-opacity, 0); transform: var(--avatar-border-transform);">
                            </div>
                            <a aria-label="{{ i18n "home" }}" 
                                class="pointer-events-auto block h-16 w-16 origin-left"
                                style="transform: var(--avatar-image-transform, translate3d(0, 0, 0) scale(1));" 
                                href="{{ "/" | relLangURL }}">
                                {{ partial "avatar-image.html" . }}
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>    

    <div class="top-0 z-10 h-16 pt-6" style="position:var(--header-position)">
        <div class="top-[var(--header-top,theme(spacing.6))] w-full sm:px-8"
            style="position:var(--header-inner-position)">
            <div class="mx-auto w-full max-w-7xl lg:px-8">
                <div class="relative px-4 sm:px-8 lg:px-12">
                    <div class="mx-auto max-w-2xl lg:max-w-5xl">
                        <div class="relative flex gap-4">
                            <div class="flex flex-1"></div>
                            <div class="flex flex-1 justify-end md:justify-center">
                                {{ partial "nav.html" . }}
                            </div>
                            <div class="flex justify-end md:flex-1">
                                <div class="pointer-events-auto flex items-center gap-3">
                                    {{ partial "language.html" . }}
                                    <button type="button" aria-label="{{ i18n "toggle_theme" }}"
                                        class="theme-toggle group rounded-full bg-white/90 px-3 py-2 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur transition dark:bg-zinc-800/90 dark:ring-white/10 dark:hover:ring-white/20">
                                        <span class="sr-only">{{ i18n "toggle_theme" }}</span>
                                        {{ partial "icons/sun.html" . }}
                                        {{ partial "icons/moon.html" . }}
                                        {{ partial "icons/system.html" . }}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{ else }}
    <div class="top-0 z-10 mb-12 h-16 pt-6" style="position:var(--header-position)">
        <div class="top-[var(--header-top,theme(spacing.6))] w-full sm:px-8"
            style="position:var(--header-inner-position)">
            <div class="mx-auto w-full max-w-7xl lg:px-8">
                <div class="relative px-4 sm:px-8 lg:px-12">
                    <div class="mx-auto max-w-2xl lg:max-w-5xl">
                        <div class="relative flex items-center gap-4">
                            <div class="flex-1">
                                <div class="relative">
                                    <div class="avatar-border absolute left-0 top-3 h-10 w-10 origin-left rounded-full bg-white/90 p-0.5 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur transition-opacity dark:bg-zinc-800/90 dark:ring-white/10"
                                        style="opacity: var(--avatar-border-opacity, 0); transform: var(--avatar-border-transform);">
                                    </div>
                                    <a aria-label="{{ i18n "home" }}" 
                                        class="pointer-events-auto block h-16 w-16 origin-left"
                                        style="transform: translate3d(0.125rem, 0, 0) scale(0.5625);"
                                        href="{{ "/" | relLangURL }}">
                                        {{ partial "avatar-image.html" . }}
                                    </a>
                                </div>
                            </div>

                            <div class="flex flex-1 justify-end md:justify-center">
                                {{ partial "nav.html" . }}
                            </div>
                            
                            <div class="flex justify-end md:flex-1">
                                <div class="pointer-events-auto flex items-center gap-3">
                                    {{ partial "language.html" . }}
                                    {{ partial "theme-toggle.html" . }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{ end }}
    
    {{ if .IsHome }}
    <div class="flex-none" style="height: var(--content-offset);"></div>
    {{ end }}
</header>

{{ $script := resources.Get "js/header.js" | js.Build (dict "minify" true) }}
<script defer src="{{ $script.RelPermalink }}"></script>